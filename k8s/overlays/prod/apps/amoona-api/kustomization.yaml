apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: amoona-api-prod

namespace: amoona-prod

resources:
  - ../../../../base/apps/amoona-api
  - ingress.yaml
  - secrets.yaml

patches:
  - path: replicas-patch.yaml
  - path: resources-patch.yaml
  # Uncomment below to use Vault for secrets instead of Kubernetes Secrets
  # - path: vault-patch.yaml

labels:
  - pairs:
      environment: prod
    includeSelectors: false

images:
  # GitLab Container Registry
  - name: registry.gitlab.com/hypnozsarl/amoona-api
    newTag: "latest"

configMapGenerator:
  - name: amoona-api-config
    behavior: merge
    literals:
      - SPRING_PROFILES_ACTIVE=prod
