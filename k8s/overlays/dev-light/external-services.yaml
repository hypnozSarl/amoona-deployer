# =============================================================================
# Services exposés en externe pour outils de management (DataGrip, etc.)
# =============================================================================
# PostgreSQL: 30432
# Redis: 30379
# MinIO API: 30900
# MinIO Console: 30901
# =============================================================================

# PostgreSQL - Accès externe via NodePort
apiVersion: v1
kind: Service
metadata:
  name: postgres-external
  labels:
    app: postgres
    exposure: external
spec:
  type: NodePort
  selector:
    app: postgres
  ports:
    - name: postgres
      port: 5432
      targetPort: 5432
      nodePort: 30432
---
# Redis - Accès externe via NodePort
apiVersion: v1
kind: Service
metadata:
  name: redis-external
  labels:
    app: redis
    exposure: external
spec:
  type: NodePort
  selector:
    app: redis
  ports:
    - name: redis
      port: 6379
      targetPort: 6379
      nodePort: 30379
---
# MinIO S3 API - Accès externe via NodePort
apiVersion: v1
kind: Service
metadata:
  name: minio-external
  labels:
    app: minio
    exposure: external
spec:
  type: NodePort
  selector:
    app: minio
  ports:
    - name: s3-api
      port: 9000
      targetPort: 9000
      nodePort: 30900
    - name: console
      port: 9001
      targetPort: 9001
      nodePort: 30901
